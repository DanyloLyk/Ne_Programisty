# üß™ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è ‚Äî Ne_Programisty

## üìñ –ú–µ—Ç–∞

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î, —è–∫ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ —Ç–∞ —É Docker, —è–∫—ñ —î —Ç–∏–ø–∏ —Ç–µ—Å—Ç—ñ–≤ —É –ø—Ä–æ—î–∫—Ç—ñ, –ø—Ä–∏–∫–ª–∞–¥–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ç–µ—Å—Ç—ñ–≤.

–ú–µ—Ç–∞: –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –∑—Ä–æ–∑—É–º—ñ–ª—É, –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—É —Ç–∞ –±–µ–∑–ø–µ—á–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤.



## ‚ö†Ô∏è –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

* Python 3.8+ —Ç–∞ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è (`.venv` —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
* –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø—Ä–æ—î–∫—Ç—É:

```bash
pip install -r requirements.txt
```

* Docker (–¥–ª—è –∑–∞–ø—É—Å–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤) ‚Äî –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ



## üèÅ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ (Windows / macOS / Linux)

1. –ê–∫—Ç–∏–≤—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è:

```bash
# Windows
.venv\Scripts\activate

# macOS / Linux
source .venv/bin/activate
```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ —â–µ –Ω–µ –∑—Ä–æ–±–ª–µ–Ω–æ):

```bash
pip install -r requirements.txt
```

3. –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤:

```bash
pytest
```

4. –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª—É –∞–±–æ —Ç–µ—Å—Ç—É:

```bash
# –≤–µ—Å—å —Ñ–∞–π–ª
pytest tests/unit/test_feedback_rules.py

# –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ç–µ—Å—Ç
pytest tests/integration/test_api_cart.py::test_add_item_to_cart_new_item
```

5. –ó–∞–ø—É—Å–∫ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º –∫–æ–¥—É —Ç–∞ HTML-–∑–≤—ñ—Ç–æ–º:

```bash
pytest --cov=app --cov-report=html
# –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–≤—ñ—Ç
open htmlcov/index.html      # macOS / Linux
start htmlcov\index.html     # Windows
```

6. –ó–∞–ø—É—Å–∫ —Ç—ñ–ª—å–∫–∏ unit –∞–±–æ integration —Ç–µ—Å—Ç—ñ–≤:

```bash
pytest tests/unit
pytest tests/integration
```



## üê≥ –ó–∞–ø—É—Å–∫ —É Docker

1. –ü–æ–±—É–¥–æ–≤–∞ Docker –æ–±—Ä–∞–∑—É:

```bash
docker build -t ne_programisty:test .
```

2. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑ —Ç–µ—Å—Ç–∞–º–∏:

```bash
docker run --rm ne_programisty:test pytest
```

3. –ü–æ–±–∞—á–∏—Ç–∏ –∑–≤—ñ—Ç –ø–æ–∫—Ä–∏—Ç—Ç—è –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:

```bash
docker run --rm ne_programisty:test pytest --cov=app --cov-report=term-missing
```

> ‚ö†Ô∏è –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –º–æ–∂—É—Ç—å –ø–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–æ—ó –ë–î. –î–ª—è —Ü—å–æ–≥–æ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `docker-compose` –∞–±–æ –∑–≤'—è–∑–∞—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ñ–∑ —Ç–µ—Å—Ç–æ–≤–æ—é –ë–î.



## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤

* `tests/unit/` ‚Äî –º–æ–¥—É–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–∞ —Å–µ—Ä–≤—ñ—Å–Ω–æ—ó –ª–æ–≥—ñ–∫–∏
* `tests/integration/` ‚Äî —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è API/—Å–µ—Ä–≤—ñ—Å—ñ–≤ —ñ–∑ —Ä–µ–∞–ª—å–Ω–æ—é –ë–î
* `tests/conftest.py` ‚Äî —Ñ—ñ–∫—Å—Ç—É—Ä–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞



## üîç –û—Å–Ω–æ–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### FeedbackService

* –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –≤—ñ–¥–≥—É–∫—ñ–≤, –ø–æ—à—É–∫ –ø–æ `id`
* —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è / –æ–Ω–æ–≤–ª–µ–Ω–Ω—è / –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é –ø–æ–ª—ñ–≤
  **–ü—Ä–∏–∫–ª–∞–¥:**

```python
assert feedback.title == "–¢–µ—Å—Ç–æ–≤–∏–π –≤—ñ–¥–≥—É–∫"
assert feedback.description.startswith("–û–ø–∏—Å")
```

### DesktopService

* —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è / –æ–Ω–æ–≤–ª–µ–Ω–Ω—è / –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
* –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–ª—ñ–≤: –Ω–∞–∑–≤–∞, —Ü—ñ–Ω–∞, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
  **–ü—Ä–∏–∫–ª–∞–¥:**

```python
assert desktop.price == 1000
assert desktop.image.endswith(".png")
```

### UserService

* –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è / —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
* –∑–∞–ø–∏—Ç —Å–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é —Ç–∞ –∑–º—ñ–Ω–∞ —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω
  **–ü—Ä–∏–∫–ª–∞–¥:**

```python
assert token is not None
success, msg = UserService.reset_password_with_token(token, "123456", "123456")
assert success
```

### OrdersService

* –∑–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–¥–æ–ø—É—Å—Ç–∏–º—ñ / –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ñ —Å—Ç–∞—Ç—É—Å–∏)
* –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–ø–∏—Å–∫—É –∑–∞–º–æ–≤–ª–µ–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### CartService (—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ)

* –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—à–∏–∫–∞
* –¥–æ–¥–∞–≤–∞–Ω–Ω—è / –≤–∏–¥–∞–ª–µ–Ω–Ω—è / –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–æ–≤–∞—Ä—ñ–≤
* –æ—á–∏—â–µ–Ω–Ω—è –∫–æ—à–∏–∫–∞
  **–ü—Ä–∏–∫–ª–∞–¥:**

```python
cart = CartService.get_cart(user_id=1)
assert cart['total'] == 2000
```

> –ö–ª—é—á: —Ç–µ—Å—Ç–∏ –º–∞—é—Ç—å –ø–æ–∫—Ä–∏–≤–∞—Ç–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó —Ç–∞ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ / –≥—Ä–∞–Ω–∏—á–Ω—ñ –≤–∏–ø–∞–¥–∫–∏.



## ‚úçÔ∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤

* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `pytest` —Ç–∞ `pytest-mock` –∞–±–æ `unittest.mock` –¥–ª—è –º–æ–∫—ñ–≤
* –§—ñ–∫—Å—Ç—É—Ä–∏ (`conftest.py`) –¥–ª—è –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–∏—Ö: —Ç–µ—Å—Ç–æ–≤–∞ –ë–î, –∫–ª—ñ—î–Ω—Ç Flask, —Ç–µ—Å—Ç–æ–≤—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ
* –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ —ñ–∑–æ–ª—é–π—Ç–µ: —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –∞–±–æ –æ–∫—Ä–µ–º–∞ —Ç–µ—Å—Ç–æ–≤–∞ –ë–î / –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
* –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ —è–∫ –ø–æ–∑–∏—Ç–∏–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —Ç–∞–∫ —ñ –ø–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
* –ü–∏—à—ñ—Ç—å –∑—Ä–æ–∑—É–º—ñ–ª—ñ, –¥–µ—Ç–∞–ª—å–Ω—ñ –∞—Å–µ—Ä—Ç–∏ –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏, –¥–µ —Ü–µ –¥–æ—Ä–µ—á–Ω–æ



## üîÅ CI / –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è

* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç—ñ —Å–∞–º—ñ –∫–æ–º–∞–Ω–¥–∏, —â–æ –π –ª–æ–∫–∞–ª—å–Ω–æ
* –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—ñ–≤ –ø–æ–∫—Ä–∏—Ç—Ç—è –¥–ª—è CI:

```bash
pytest --cov=app --cov-report=xml
```

* –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –≤ –æ–∫—Ä–µ–º–æ–º—É job —ñ–∑ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ —Ç–µ—Å—Ç–æ–≤–æ—ó –ë–î



## üõ†Ô∏è –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

* –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç—ñ–≤ –∑–∞ –Ω–∞–∑–≤–æ—é:

```bash
pytest -k "add_item and cart"
```

* –ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É –∑ –¥–æ–∫–ª–∞–¥–Ω–∏–º –≤–∏–≤–æ–¥–æ–º:

```bash
pytest -q tests/integration/test_api_cart.py -vv
```

* –û–Ω–æ–≤–∏—Ç–∏ HTML-–∑–≤—ñ—Ç –ø–æ–∫—Ä–∏—Ç—Ç—è:

```bash
pytest --cov=app --cov-report=html
open htmlcov/index.html   # macOS / Linux
start htmlcov\index.html  # Windows
```
