{% extends 'base.html' %}

{% block title %}–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å ‚Äî –ì—Ä–∞–ª—å–Ω–∞ –ö–æ–º–æ—Ä–∞{% endblock %}

{% block content %}

{% include 'components/admin/add_item.html' %}
{% include 'components/admin/edit_item.html' %}

<div class="container mt-4">

    <h2 class="fw-bold text-warning mb-4">‚öôÔ∏è –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</h2>

    <!-- NAV TABS -->
    <ul class="nav nav-tabs mb-4" id="adminTabs">
        <li class="nav-item">
            <a class="nav-link active" data-bs-toggle="tab" href="#items">üé≤ –¢–æ–≤–∞—Ä–∏</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#news">üì∞ –ù–æ–≤–∏–Ω–∏</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#orders">üßæ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#users">üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</a>
        </li>
    </ul>

    <div class="tab-content">

        <!-- ========================= -->
        <!-- üé≤ –¢–û–í–ê–†–ò -->
        <!-- ========================= -->
        <div id="items" class="tab-pane fade show active">
            <h4 class="fw-bold text-warning mb-3">üé≤ –¢–æ–≤–∞—Ä–∏</h4>

            <button class="btn btn-warning mb-3 fw-bold" data-bs-toggle="modal" data-bs-target="#addItemModal">
                ‚ûï –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä
            </button>

            <div class="row">
                {% for item in items %}
                <div class="col-md-4 mb-3">
                    <div class="card border border-warning shadow-sm">
                        <img src="{{ url_for('static', filename=item.image) }}" class="card-img-top" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title text-warning fw-bold">{{ item.name }}</h5>
                            <p class="card-text small">{{ item.description[:80] }}...</p>
                            <p class="fw-bold">{{ item.price }} ‚Ç¥</p>

                            <div class="d-flex justify-content-between">
                                <a href="#" class="btn btn-outline-warning btn-sm edit-btn" data-id="{{ item.id }}">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                                <button class="btn btn-outline-danger btn-sm delete-btn" data-id="{{ item.id }}">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <p class="text-muted">–ù–µ–º–∞—î —Ç–æ–≤–∞—Ä—ñ–≤.</p>
                {% endfor %}
            </div>
        </div>

        <!-- ========================= -->
        <!-- üì∞ –ù–û–í–ò–ù–ò -->
        <!-- ========================= -->
        <div id="news" class="tab-pane fade">
            <h4 class="fw-bold text-warning mb-3">üì∞ –ù–æ–≤–∏–Ω–∏</h4>

            <a href="{{ url_for('main.add_news') }}" class="btn btn-warning mb-3 fw-bold">
                ‚ûï –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–Ω—É
            </a>

            <ul class="list-group">
                {% for item in news %}
                <li class="list-group-item d-flex justify-content-between">
                    <div>
                        <strong>{{ item.title }}</strong>
                        <br>
                        <span class="text-muted small">{{ item.date }}</span>
                    </div>
                    <div>
                        <a href="{{ url_for('main.edit_news', id=item.id) }}" class="btn btn-outline-warning btn-sm">‚úèÔ∏è</a>
                        <a href="{{ url_for('main.delete_news', id=item.id) }}" class="btn btn-outline-danger btn-sm"
                           onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ –Ω–æ–≤–∏–Ω—É?')">üóëÔ∏è</a>
                    </div>
                </li>
                {% else %}
                <p class="text-muted">–ù–æ–≤–∏–Ω –Ω–µ–º–∞—î.</p>
                {% endfor %}
            </ul>
        </div>

        <!-- ========================= -->
        <!-- üßæ –ó–ê–ú–û–í–õ–ï–ù–ù–Ø -->
        <!-- ========================= -->
        <div id="orders" class="tab-pane fade">
            <h4 class="fw-bold text-warning mb-3">üßæ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</h4>

            <ul class="list-group">
                {% for order in orders %}
                <li class="list-group-item">
                    <div class="d-flex justify-content-between">
                        <div>
                            <strong>‚Ññ{{ order.id }}</strong> ‚Äî {{ order.user_name }}
                            <br><span class="text-muted small">{{ order.date }}</span>
                        </div>
                        <div class="text-warning fw-bold">{{ order.total }} ‚Ç¥</div>
                    </div>
                </li>
                {% else %}
                <p class="text-muted">–ó–∞–º–æ–≤–ª–µ–Ω—å –ø–æ–∫–∏ –Ω–µ–º–∞—î.</p>
                {% endfor %}
            </ul>
        </div>

        <!-- ========================= -->
        <!-- üë• –ö–û–†–ò–°–¢–£–í–ê–ß–Ü -->
        <!-- ========================= -->
        <div id="users" class="tab-pane fade">
            <h4 class="fw-bold text-warning mb-3">üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</h4>

            <ul class="list-group">
                {% for user in users %}
                <li class="list-group-item d-flex justify-content-between">
                    <div>
                        <strong>{{ user.username }}</strong>
                        <br><span class="text-muted small">{{ user.email }}</span>
                    </div>
                    <div>
                        <a href="{{ url_for('main.delete_user', id=user.id) }}" class="btn btn-outline-danger btn-sm"
                           onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞?')">üóëÔ∏è</a>
                    </div>
                </li>
                {% else %}
                <p class="text-muted">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–µ–º–∞—î.</p>
                {% endfor %}
            </ul>
        </div>

    </div>
</div>
{% endblock %}
