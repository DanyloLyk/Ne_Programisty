{% extends 'base.html' %}

{% block title %}–ì—Ä–∞–ª—å–Ω–∞ –ö–æ–º–æ—Ä–∞ - –ì–æ–ª–æ–≤–Ω–∞{% endblock %}

{% block content %}
<div class="container mt-5">

    {# === 1. –ì–æ–ª–æ–≤–Ω–∞ —Å–µ–∫—Ü—ñ—è (Hero) === #}
    <section class="row mb-5 position-relative hero-section">
        <div class="col-12">
            <div class="p-5 mb-4 rounded-3 border border-warning shadow-lg bg-transparent animate__animated animate__fadeIn hero-card">
                <div class="container-fluid py-5 text-center">
                    <h1 class="display-4 fw-bold text-warning mb-4 animate__animated animate__fadeInDown">
                        –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ "–ì—Ä–∞–ª—å–Ω–∞ –ö–æ–º–æ—Ä–∞"
                    </h1>
                    <p class="col-md-8 fs-5 mx-auto mb-4 animate__animated animate__fadeInUp text-muted">
                        –ù–∞—Å—Ç—ñ–ª—å–Ω—ñ —ñ–≥—Ä–∏ –¥–ª—è –¥—Ä—É–∑—ñ–≤, —Ä–æ–¥–∏–Ω–∏ —Ç–∞ —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–≤ ‚òïüé≤  
                        –í—ñ–¥–ø–æ—á–∏–Ω—å, –∫–∏–Ω—å –∫—É–±–∏–∫–∞ —Ç–∞ –æ–±–µ—Ä–∏ —Å–≤–æ—é –Ω–∞—Å—Ç—É–ø–Ω—É –≥—Ä—É!
                    </p>

                    <div class="d-flex justify-content-center flex-wrap gap-3 animate__animated animate__fadeInUp">
                        <a href="/catalog" class="btn btn-warning btn-lg px-5 py-3 mb-3 mb-md-0 shadow hover-shadow">
                            –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∫–∞—Ç–∞–ª–æ–≥
                        </a>
                        <a href="/contacts" class="btn btn-outline-warning btn-lg px-5 py-3 mb-3 mb-md-0 shadow hover-shadow">
                            –ö–æ–Ω—Ç–∞–∫—Ç–∏
                        </a>
                        <a href="/about" class="btn btn-outline-warning btn-lg px-5 py-3 mb-3 mb-md-0 shadow hover-shadow">
                            –ü—Ä–æ –Ω–∞—Å
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {# --- Top-3 popular products --- #}
    {% if top_popular and top_popular|length > 0 %}
    <section class="container mt-4">
        <div class="row mb-4">
            <div class="col-12">
                <h2 class="h3 fw-bold text-warning mb-3">–¢–æ–ø-3 –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤</h2>
            </div>
            <div class="col-12">
                <div class="row">
                    {% for item in top_popular %}
                    <div class="col-12 col-md-4 mb-3">
                        <div class="card h-100 shadow-sm d-flex flex-column">
                            {% if item.image %}
                            <div class="ratio ratio-1x1">
                                <img src="{{ url_for('static', filename=item.image) }}" class="w-100 h-100" alt="{{ item.name }}" style="object-fit: cover;">
                            </div>
                            {% else %}
                            <div class="ratio ratio-1x1 bg-secondary"></div>
                            {% endif %}

                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">{{ item.name }}</h5>
                                <p class="card-text text-muted small">{{ item.description }}</p>
                                <p class="mb-2"><strong>–ö—É–ø–∏–ª–∏:</strong> {{ item.bought_count }}</p>

                                <div class="mt-auto">
                                    <div class="text-center text-warning fw-bold mb-2">{{ '%.2f'|format(item.price) }} ‚Ç¥</div>
                                    {% if current_user %}
                                    <a href="{{ url_for('main.add_to_cart', item_id=item.id) }}" class="btn btn-warning w-100">–î–æ –∫–æ—à–∏–∫–∞</a>
                                    {% else %}
                                    <button type="button" class="btn btn-secondary w-100 require-auth" data-bs-toggle="tooltip" data-bs-placement="top" title="–ü–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å">–î–æ –∫–æ—à–∏–∫–∞</button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
    {% endif %}

</div>

{% endblock %}
