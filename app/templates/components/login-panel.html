{% if not current_user %}
<!-- Модалка Вхід -->
<div id="login-modal" class="login-modal">
  <div class="login-modal-content">
    <span id="close-login" class="close">&times;</span>
    <form action="{{ url_for('main.login') }}" method="POST" class="form">
      <p>Ласкаво просимо, <span>увійдіть, щоб продовжити</span></p>

      <span class="input-span">
        <label for="login-email" class="label">Електронна пошта</label>
        <input type="email" name="email" id="login-email" placeholder="Введіть вашу електронну пошту" required>
      </span>

      <span class="input-span">
        <label for="login-password" class="label">Пароль</label>
        <input type="password" name="password" id="login-password" placeholder="Введіть ваш пароль" required>
      </span>

      <button type="submit" class="oauthButton submit">
        Увійти
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m6 17 5-5-5-5"></path>
          <path d="m13 17 5-5-5-5"></path>
        </svg>
      </button>

      <div class="d-flex justify-content-between align-items-center">
        <span class="span">
          Немає облікового запису?
          <a href="#" id="open-signup">Зареєструватися</a>
        </span>

        <span class="span">
          <a href="#" id="open-forgot-password">Забули пароль?</a>
        </span>
      </div>
    </form>
  </div>
</div>


<!-- Модалка Відновлення пароля -->
<div id="forgot-password-modal" class="login-modal">
  <div class="login-modal-content">
    <span id="close-forgot-password" class="close">&times;</span>
    <form id="forgot-password-form" class="form">
      <p>Відновлення пароля, <span>введіть вашу електронну пошту</span></p>

      <span class="input-span">
        <label for="forgot-email" class="label">Електронна пошта</label>
        <input type="email" name="email" id="forgot-email" placeholder="Введіть вашу електронну пошту" required>
      </span>

      <button type="submit" class="oauthButton submit">
        Відправити посилання
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m6 17 5-5-5-5"></path>
          <path d="m13 17 5-5-5-5"></path>
        </svg>
      </button>

      <div id="forgot-message" class="mt-3 text-center" style="font-size: 0.9rem;"></div>

      <span class="span">
        Пам'ятаєте пароль?
        <a href="#" id="back-to-login">Увійти</a>
      </span>
    </form>

    <!-- Форма для скидання пароля (показується після відправки email) -->
    <form id="reset-password-form" class="form" style="display: none;">
      <p>Встановіть новий пароль, <span>перевірте email пошти, яку ви ввели</span></p>

      <span class="input-span">
        <label for="reset-token" class="label">Токен відновлення</label>
        <input type="text" name="token" id="reset-token" placeholder="Введіть токен з email" required>
      </span>

      <span class="input-span">
        <label for="reset-password" class="label">Новий пароль</label>
        <input type="password" name="password" id="reset-password" placeholder="Введіть новий пароль" required>
      </span>

      <span class="input-span">
        <label for="reset-confirm" class="label">Підтвердіть пароль</label>
        <input type="password" name="confirm" id="reset-confirm" placeholder="Повторіть новий пароль" required>
      </span>

      <button type="submit" class="oauthButton submit" style="margin-top: 15px;">
        Змінити пароль
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14.7 6.3a1 1 0 0 0-1.4 0l-4 4a1 1 0 0 0 0 1.4l4 4a1 1 0 0 0 1.4-1.4L11.42 11H19a1 1 0 0 0 0-2h-7.58l3.3-3.3a1 1 0 0 0 0-1.4z"/>
        </svg>
      </button>

      <div id="reset-message" class="mt-3 text-center" style="font-size: 0.9rem;"></div>

      <span class="span">
        <a href="#" id="back-to-forgot">Назад</a>
      </span>
    </form>
  </div>
</div>


<!-- Модалка Реєстрація -->
<div id="signup-modal" class="login-modal">
  <div class="login-modal-content">
    <span id="close-signup" class="close">&times;</span>
    <form action="{{ url_for('main.register') }}" method="POST" class="form">
      <p>Ласкаво просимо, <span>створіть свій обліковий запис</span></p>

      <span class="input-span">
        <label for="signup-name" class="label">Ім’я користувача</label>
        <input type="text" name="name" id="signup-name" placeholder="Введіть ім’я користувача" required>
      </span>

      <span class="input-span">
        <label for="signup-email" class="label">Електронна пошта</label>
        <input type="email" name="email" id="signup-email" placeholder="Введіть вашу електронну пошту" required>
      </span>

      <span class="input-span">
        <label for="signup-password" class="label">Пароль</label>
        <input type="password" name="password" id="signup-password" placeholder="Введіть пароль" required>
      </span>

      <span class="input-span">
        <label for="signup-confirm" class="label">Підтвердіть пароль</label>
        <input type="password" name="confirm" id="signup-confirm" placeholder="Повторіть пароль" required>
      </span>

      <button type="submit" class="oauthButton submit">
        Зареєструватися
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m6 17 5-5-5-5"></path>
          <path d="m13 17 5-5-5-5"></path>
        </svg>
      </button>

      <span class="span">
        Вже маєте обліковий запис?
        <a href="#" id="open-login">Увійти</a>
      </span>
    </form>
  </div>
</div>
{% endif %}
